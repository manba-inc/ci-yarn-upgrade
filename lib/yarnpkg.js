"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _spawn = require("./promise/spawn");

var _spawn2 = _interopRequireDefault(_spawn);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

let COMMAND = "yarnpkg";
exports.default = class {
    constructor(workingdir, LOG) {
        this.cwd = workingdir;
        this.LOG = LOG;
    }

    install() {
        this.LOG("BEGIN yarnpkg install");
        return (0, _spawn2.default)(COMMAND, ["install"], { cwd: this.cwd }).then(() => this.LOG("END   yarnpkg install"));
    }

    outdated() {
        this.LOG("BEGIN yarnpkg outdated");
        return (0, _spawn2.default)(COMMAND, ["outdated", "--json"], { cwd: this.cwd }).then(out => {
            this.LOG("END   yarnpkg outdated");
            return out.stdout.trim();
        });
    }

    upgrade() {
        this.LOG("BEGIN yarnpkg upgrade");
        return (0, _spawn2.default)(COMMAND, ["upgrade", "--json"], { cwd: this.cwd }).then(out => {
            this.LOG("END   yarnpkg upgrade");
            return out.stdout.trim();
        });
    }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy95YXJucGtnLmpzIl0sIm5hbWVzIjpbIkNPTU1BTkQiLCJjb25zdHJ1Y3RvciIsIndvcmtpbmdkaXIiLCJMT0ciLCJjd2QiLCJpbnN0YWxsIiwidGhlbiIsIm91dGRhdGVkIiwib3V0Iiwic3Rkb3V0IiwidHJpbSIsInVwZ3JhZGUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7QUFFQSxJQUFJQSxVQUFVLFNBQWQ7a0JBQ2UsTUFBTTtBQUNqQkMsZ0JBQVlDLFVBQVosRUFBd0JDLEdBQXhCLEVBQTZCO0FBQ3pCLGFBQUtDLEdBQUwsR0FBV0YsVUFBWDtBQUNBLGFBQUtDLEdBQUwsR0FBV0EsR0FBWDtBQUNIOztBQUVERSxjQUFVO0FBQ04sYUFBS0YsR0FBTCxDQUFTLHVCQUFUO0FBQ0EsZUFBTyxxQkFBTUgsT0FBTixFQUFlLENBQUMsU0FBRCxDQUFmLEVBQTRCLEVBQUVJLEtBQUssS0FBS0EsR0FBWixFQUE1QixFQUNGRSxJQURFLENBQ0csTUFBTSxLQUFLSCxHQUFMLENBQVMsdUJBQVQsQ0FEVCxDQUFQO0FBRUg7O0FBRURJLGVBQVc7QUFDUCxhQUFLSixHQUFMLENBQVMsd0JBQVQ7QUFDQSxlQUFPLHFCQUFNSCxPQUFOLEVBQWUsQ0FBQyxVQUFELEVBQWEsUUFBYixDQUFmLEVBQXVDLEVBQUVJLEtBQUssS0FBS0EsR0FBWixFQUF2QyxFQUNGRSxJQURFLENBQ0dFLE9BQU87QUFDVCxpQkFBS0wsR0FBTCxDQUFTLHdCQUFUO0FBQ0EsbUJBQU9LLElBQUlDLE1BQUosQ0FBV0MsSUFBWCxFQUFQO0FBQ0gsU0FKRSxDQUFQO0FBS0g7O0FBRURDLGNBQVU7QUFDTixhQUFLUixHQUFMLENBQVMsdUJBQVQ7QUFDQSxlQUFPLHFCQUFNSCxPQUFOLEVBQWUsQ0FBQyxTQUFELEVBQVksUUFBWixDQUFmLEVBQXNDLEVBQUVJLEtBQUssS0FBS0EsR0FBWixFQUF0QyxFQUNGRSxJQURFLENBQ0dFLE9BQU87QUFDVCxpQkFBS0wsR0FBTCxDQUFTLHVCQUFUO0FBQ0EsbUJBQU9LLElBQUlDLE1BQUosQ0FBV0MsSUFBWCxFQUFQO0FBQ0gsU0FKRSxDQUFQO0FBS0g7QUE1QmdCLEMiLCJmaWxlIjoieWFybnBrZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBzcGF3biBmcm9tIFwiLi9wcm9taXNlL3NwYXduXCI7XG5cbmxldCBDT01NQU5EID0gXCJ5YXJucGtnXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyB7XG4gICAgY29uc3RydWN0b3Iod29ya2luZ2RpciwgTE9HKSB7XG4gICAgICAgIHRoaXMuY3dkID0gd29ya2luZ2RpcjtcbiAgICAgICAgdGhpcy5MT0cgPSBMT0c7XG4gICAgfVxuXG4gICAgaW5zdGFsbCgpIHtcbiAgICAgICAgdGhpcy5MT0coXCJCRUdJTiB5YXJucGtnIGluc3RhbGxcIik7XG4gICAgICAgIHJldHVybiBzcGF3bihDT01NQU5ELCBbXCJpbnN0YWxsXCJdLCB7IGN3ZDogdGhpcy5jd2QgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuTE9HKFwiRU5EICAgeWFybnBrZyBpbnN0YWxsXCIpKTtcbiAgICB9XG5cbiAgICBvdXRkYXRlZCgpIHtcbiAgICAgICAgdGhpcy5MT0coXCJCRUdJTiB5YXJucGtnIG91dGRhdGVkXCIpO1xuICAgICAgICByZXR1cm4gc3Bhd24oQ09NTUFORCwgW1wib3V0ZGF0ZWRcIiwgXCItLWpzb25cIl0sIHsgY3dkOiB0aGlzLmN3ZCB9KVxuICAgICAgICAgICAgLnRoZW4ob3V0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLkxPRyhcIkVORCAgIHlhcm5wa2cgb3V0ZGF0ZWRcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dC5zdGRvdXQudHJpbSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdXBncmFkZSgpIHtcbiAgICAgICAgdGhpcy5MT0coXCJCRUdJTiB5YXJucGtnIHVwZ3JhZGVcIik7XG4gICAgICAgIHJldHVybiBzcGF3bihDT01NQU5ELCBbXCJ1cGdyYWRlXCIsIFwiLS1qc29uXCJdLCB7IGN3ZDogdGhpcy5jd2QgfSlcbiAgICAgICAgICAgIC50aGVuKG91dCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5MT0coXCJFTkQgICB5YXJucGtnIHVwZ3JhZGVcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dC5zdGRvdXQudHJpbSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufVxuIl19