{"version":3,"sources":["compare.test.js"],"names":["CompareModel","t","diff","map","Map","e","cw","name","expected","homepage","split","actual","i","is","tags","Set","repo","set","trim"],"mappings":"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","file":"compare.test.js","sourcesContent":["import test from \"ava\";\n\nimport pkg from \"../package.json\";\nimport { toMarkdown, toTextTable } from \"../src/compare\";\nimport { __test__ } from \"../src/github\";\n\nconst [CompareModel] = __test__;\n\ntest(\"toMarkdown#simple\", t => {\n    let diff = [\n        [\"classnames\", \"2.2.0\", \"2.2.0\", \"2.2.5\", \"dependencies\"],\n        [\"react\", \"15.0.0\", \"15.3.2\", \"15.3.2\", \"devDependencies\"],\n        [\"fsevents\", \"1.0.0\", \"1.0.7\", \"1.0.14\", \"optionalDependencies\"]\n    ];\n    let map = new Map(diff.map(e => {\n        let cw = new CompareModel(e);\n        return [cw.name, cw];\n    }));\n    let expected = `## Updating Dependencies\n\n| Name | Updating | Latest | dependencies | devDependencies | optionalDependencies |\n|:---- |:--------:|:------:|:-:|:-:|:-:|\n| classnames | 2.2.0 | 2.2.5 | * |   |   |\n| react | 15.0.0...15.3.2 | 15.3.2 |   | * |   |\n| fsevents | 1.0.0...1.0.7 | 1.0.14 |   |   | * |\n\nPowered by [${pkg.name}](${pkg.homepage})`.split(/[\\r]?\\n/);\n    let actual = toMarkdown(map).split(/[\\r]?\\n/);\n    for (let i in expected) {\n        t.is(actual[i], expected[i]);\n    }\n});\n\ntest(\"toMarkdown#complex\", t => {\n    let cw = new CompareModel([\"react\", \"15.0.0\", \"15.3.2\", \"15.3.2\"]);\n    cw.tags = new Set([\"v15.0.0\", \"v15.3.2\", \"v15.3.2\"]);\n    cw.homepage = \"https://facebook.github.io/react/\";\n    cw.repo = \"https://github.com/facebook/react\";\n    let map = new Map().set(cw.name, cw);\n    let expected = `## Updating Dependencies\n\n| Name | Updating | Latest |\n|:---- |:--------:|:------:|\n| [react](${cw.homepage}) | [15.0.0...15.3.2](${cw.repo}/compare/v15.0.0...v15.3.2) | [15.3.2](${cw.repo}/compare/v15.0.0...v15.3.2) |\n\nPowered by [${pkg.name}](${pkg.homepage})`.split(/[\\r]?\\n/);\n    let actual = toMarkdown(map).split(/[\\r]?\\n/);\n    for (let i in expected) {\n        t.is(actual[i], expected[i]);\n    }\n});\n\ntest(\"toTextTable\", t => {\n    let diff = [\n        [\"classnames\", \"2.2.0\", \"2.2.0\", \"2.2.5\", \"dependencies\"],\n        [\"react\", \"15.0.0\", \"15.3.2\", \"15.3.2\", \"devDependencies\"],\n        [\"fsevents\", \"1.0.0\", \"1.0.7\", \"1.0.14\", \"optionalDependencies\"]\n    ];\n    let map = new Map(diff.map(e => {\n        let cw = new CompareModel(e);\n        return [cw.name, cw];\n    }));\n    let expected = `\\u001b[90m============\\u001b[39m\\u001b[90m==================\\u001b[39m\\u001b[90m=========\\u001b[39m\\u001b[90m===============\\u001b[39m\\u001b[90m==================\\u001b[39m\\u001b[90m=======================\\u001b[39m\n Name       \\u001b[90m|\\u001b[39m    Updating     \\u001b[90m|\\u001b[39m Latest \\u001b[90m|\\u001b[39m dependencies \\u001b[90m|\\u001b[39m devDependencies \\u001b[90m|\\u001b[39m optionalDependencies\n\\u001b[90m------------\\u001b[39m\\u001b[90m------------------\\u001b[39m\\u001b[90m---------\\u001b[39m\\u001b[90m---------------\\u001b[39m\\u001b[90m------------------\\u001b[39m\\u001b[90m-----------------------\\u001b[39m\n classnames \\u001b[90m|\\u001b[39m      2.2.0      \\u001b[90m|\\u001b[39m 2.2.5  \\u001b[90m|\\u001b[39m      *       \\u001b[90m|\\u001b[39m                 \\u001b[90m|\\u001b[39m\n\\u001b[90m------------\\u001b[39m\\u001b[90m------------------\\u001b[39m\\u001b[90m---------\\u001b[39m\\u001b[90m---------------\\u001b[39m\\u001b[90m------------------\\u001b[39m\\u001b[90m-----------------------\\u001b[39m\n react      \\u001b[90m|\\u001b[39m 15.0.0...15.3.2 \\u001b[90m|\\u001b[39m 15.3.2 \\u001b[90m|\\u001b[39m              \\u001b[90m|\\u001b[39m        *        \\u001b[90m|\\u001b[39m\n\\u001b[90m------------\\u001b[39m\\u001b[90m------------------\\u001b[39m\\u001b[90m---------\\u001b[39m\\u001b[90m---------------\\u001b[39m\\u001b[90m------------------\\u001b[39m\\u001b[90m-----------------------\\u001b[39m\n fsevents   \\u001b[90m|\\u001b[39m  1.0.0...1.0.7  \\u001b[90m|\\u001b[39m 1.0.14 \\u001b[90m|\\u001b[39m              \\u001b[90m|\\u001b[39m                 \\u001b[90m|\\u001b[39m          *\n\\u001b[90m============\\u001b[39m\\u001b[90m==================\\u001b[39m\\u001b[90m=========\\u001b[39m\\u001b[90m===============\\u001b[39m\\u001b[90m==================\\u001b[39m\\u001b[90m=======================\\u001b[39m`.split(/[\\r]?\\n/);\n\n    let actual = toTextTable(map).split(/[\\r]?\\n/);\n    for (let i in expected) {\n        t.is(actual[i].trim(), expected[i].trim());\n    }\n});\n"]}